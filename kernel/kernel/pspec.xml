
<?xml version="1.0" ?>
<!DOCTYPE PISI SYSTEM "http://www.pisilinux.org/projeler/pisi/pisi-spec.dtd">
<PISI>
    <Source>
        <Name>kernel</Name>
        <Homepage>https://www.kernel.org</Homepage>
        <Packager>
            <Name>Ertuğrul Erata</Name>
            <Email>ertugrulerata@gmail.com</Email>
        </Packager>
        <License>GPLv2</License>
        <IsA>kernel</IsA>
        <Summary>The Linux kernel (the core of the Linux operating system) for Pisi Linux</Summary>
        <Description>kernel contains the Linux kernel, the core of any Linux operating system. The kernel handles the basic functions of the operating system: memory allocation, process allocation, device input and output, etc.</Description>
        <Archive sha1sum="eb09a8e0483a9ec40bdb767551d0eda27f7c221a" type="targz">https://www.kernel.org/pub/linux/kernel/v4.x/linux-4.19.tar.gz</Archive>
        <AdditionalFiles>
            <AdditionalFile target="configs/kernel-i686-config">configs/kernel-i686-config</AdditionalFile>
            <AdditionalFile target="configs/kernel-x86_64-config">configs/kernel-x86_64-config</AdditionalFile>
            <AdditionalFile permission="0755" target="generate-module-list">scripts/generate-module-list</AdditionalFile>
        </AdditionalFiles>
        <BuildDependencies>
            <Dependency>bc</Dependency>
            <Dependency>pisi</Dependency>
            <Dependency>cpio</Dependency>
            <Dependency>docbook-xsl</Dependency>
            <Dependency>diffutils</Dependency>
            <Dependency>xmlto</Dependency>
            <!--for elfutils dirty fix-->
            <Dependency>zlib-devel</Dependency>
            <Dependency>xz-devel</Dependency>
            <Dependency>openssl-devel</Dependency>
        </BuildDependencies>
        <Patches>
            <!-- Linux patches -->
            <Patch level="1" compressionType="xz">patches/linux/patch-4.19.56.xz</Patch>
            <!-- Mageia Linux patches // compatible with http://svnweb.mageia.org/packages/cauldron/kernel/releases/4.14.44/2.mga7/PATCHES/patches/series-->
            <!--stable patches-->
            <!--CVE-2016-8405-->
            <!--other patches-->
            <Patch level="1">patches/mageia_4_19/fs-aufs-4.19.patch</Patch>
            <Patch level="1">patches/mageia_4_19/fs-aufs-4.19-modular.patch</Patch>
        </Patches>
    </Source>

    <Package>
        <Name>kernel</Name>
        <RuntimeDependencies>
            <Dependency>pisi</Dependency>
            <Dependency>linux-firmware</Dependency>
            <Dependency>wireless-regdb</Dependency>
            <Dependency>grub2</Dependency>
        </RuntimeDependencies>
        <Files>
            <Path fileType="executable" permanent="true">/boot</Path>
            <Path fileType="library" permanent="true">/lib/modules</Path>
            <Path fileType="config">/etc/kernel</Path>
            <Path fileType="config" permanent="true">/etc/mkinitcpio.d</Path>
        </Files>
        <Provides>
            <COMAR script="package.py">System.Package</COMAR>
        </Provides>
        <BuildFlags>
            <Flag>noDelta</Flag>
        </BuildFlags>
    </Package>

    <Package>
        <Name>kernel-module-headers</Name>
        <Summary>Kernel header files for external module building</Summary>
        <Description>kernel-module-headers includes the C header files and the necessary Kbuild files for being able to build external kernel modules.</Description>
        <Files>
            <Path fileType="header">/usr/src/linux-headers*</Path>
            <Path fileType="header">/tmp-headers*</Path>
        </Files>
    </Package>

    <Package>
        <Name>kernel-headers</Name>
        <PartOf>system.devel</PartOf>
        <Summary>Header files for the Linux kernel for use by glibc</Summary>
        <Description>kernel-headers includes the C header files that specify the interface between the Linux kernel and userspace libraries and programs. The header files define structures and constants that are needed for building most standard programs and are also needed for rebuilding the glibc package.</Description>
        <Files>
            <Path fileType="header">/usr/include</Path>
        </Files>
    </Package>

    <Package>
        <Name>kernel-docs</Name>
        <Summary>Documentation and scripts for the Linux kernel</Summary>
        <Description>kernel-docs includes several documentation files and scripts for managing several debugging and other tasks.</Description>
        <Files>
            <Path fileType="header">/usr/src/linux-headers*/Documentation</Path>
        </Files>
    </Package>

    <History>
        <Update release="1">
            <Date>2019-06-25</Date>
            <Version>4.19.56</Version>
            <Comment>First release</Comment>
            <Type package="kernel">security</Type>
            <Requires>
                <Action package="kernel">systemRestart</Action>
            </Requires>
            <Name>Ertuğrul Erata</Name>
            <Email>ertugrulerata@gmail.com</Email>
        </Update>
    </History>
</PISI>
